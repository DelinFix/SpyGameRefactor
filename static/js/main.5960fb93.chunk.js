(this["webpackJsonpspy-game-web"]=this["webpackJsonpspy-game-web"]||[]).push([[0],{246:function(e,t,n){},247:function(e,t,n){},271:function(e,t){},432:function(e,t,n){},433:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(28),r=n.n(i),s=(n(246),n(247),n(47)),o=n(29),j=n(446),l=n(5),d=function(e){return Object(l.jsx)(j.a,{mode:"inline",className:"main-view",children:e.menuItems.map((function(e){return Object(l.jsx)(j.a.Item,{children:Object(l.jsx)(s.b,{to:e.path,children:e.name})},e.id)}))})},b=n(125),u=n(51),O=n(61),h=n(107),m=n(443),p=n(449),x=n(454),f=n(239),g=n(223),C=n.n(g),y=n(64),v=n.n(y),N=n(79),I=n(89),w=n(173),k=n.n(w),S=n(74),M=n.n(S),_=function(){return k.a.get("https://api.jsonbin.io/b/6041088b0866664b1088ad64/latest").then((function(e){return e.data.body}))},F=function(){var e=Object(I.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:n=e.sent,a=n.categories;try{k.a.put("https://api.jsonbin.io/b/6041088b0866664b1088ad64",{headers:{"Content-Type":"application/json","X-Bin-Versioning":!1},body:{categories:[].concat(Object(N.a)(a),[Object(u.a)({id:M()()},t)])}})}catch(c){console.error(c)}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(240),E={main:"/",newGame:"/new-game",rules:"/rules",roleManaging:"/role-managing",game:"/game",addCategory:"/add-category",categories:"/categories"},G=h.a.Option,R={id:1,playersCont:4,spyesCount:1,isTimerNeeded:!0,timer:5,isFirstMemberChoiseNeeded:!1,isRolesNeeded:!1,categories:[],isHelpQuestionsNeeded:!1},z=function(e){var t,n,c=C()(_,[]),i=Object(O.a)(c,1)[0],r=Object(a.useState)(R),s=Object(O.a)(r,2),j=s[0],d=s[1],g=Object(o.f)(),y=function(e){return function(t){d((function(){return Object(u.a)(Object(u.a)({},j),{},Object(b.a)({},e,t))}))}},v=Object(a.useMemo)((function(){return!j.categories.length}),[j.categories]);return Object(l.jsxs)("div",{className:"df fdc",children:[Object(l.jsx)("h1",{children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),Object(l.jsxs)(m.a,{layout:"horizontal",onFinish:(n=j,function(){e.gameStore.setGameOptions(n),g.push(E.roleManaging)}),children:[Object(l.jsx)(m.a.Item,{label:"\u0418\u0433\u0440\u043e\u043a\u043e\u0432",children:Object(l.jsx)(p.a,{min:3,defaultValue:j.playersCont,onChange:y("playersCont")})}),Object(l.jsx)(m.a.Item,{label:"\u0428\u043f\u0438\u043e\u043d\u043e\u0432",children:Object(l.jsx)(p.a,{min:1,defaultValue:j.spyesCount,onChange:y("spyesCount")})}),Object(l.jsx)(m.a.Item,{label:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438\u0433\u0440\u044b",children:Object(l.jsx)(p.a,{min:1,defaultValue:j.timer,onChange:y("timer")})}),Object(l.jsx)(m.a.Item,{label:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0439\u043c\u0435\u0440",children:Object(l.jsx)(x.a,{disabled:!0,checked:j.isTimerNeeded,onChange:y("isTimerNeeded")})}),Object(l.jsx)(m.a.Item,{label:"\u0412\u044b\u0431\u043e\u0440 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0438\u0433\u0440\u043e\u043a\u0430",children:Object(l.jsx)(x.a,{disabled:!0,checked:j.isFirstMemberChoiseNeeded,onChange:y("isFirstMemberChoiseNeeded")})}),Object(l.jsx)(m.a.Item,{label:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u0438",children:Object(l.jsx)(x.a,{disabled:!0,checked:j.isRolesNeeded,onChange:y("isRolesNeeded")})}),Object(l.jsx)(m.a.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",required:!0,children:Object(l.jsx)(h.a,{mode:"multiple",onChange:(t=Object(T.a)([],["categories"],i),function(e){return d((function(){return Object(u.a)(Object(u.a)({},j),{},{categories:t.filter((function(t){return e.includes(t.id)}))})}))}),className:"new-game__selector",children:Object(T.a)([],["categories"],i).map((function(e){return Object(l.jsx)(G,{children:e.name},e.id)}))})}),Object(l.jsx)(m.a.Item,{label:"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b",children:Object(l.jsx)(x.a,{disabled:!0,checked:j.isHelpQuestionsNeeded,onChange:y("isHelpQuestionsNeeded")})}),Object(l.jsx)(m.a.Item,{children:Object(l.jsx)(f.a,{htmlType:"submit",className:"new-game__submit",disabled:v,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"})})]})]})},H=n(442),Q=n(436),V=n(448),B=n(451),D=n(437),P=n(447),J=n(438),L=n(452),q=n(439),A=n(453),X=n(440),K=n(119),U=n(15),W=n(229),Y=n.n(W),Z=n(230),$=n.n(Z),ee=H.a.Meta,te=Object(Q.a)((function(e,t,n,a){return Object(V.a)(Object(B.a)(Object(D.a)(Object(P.a)("id",n),Object(J.a)(e,t))))(a)})),ne=Object(K.a)((function(e){var t=Object(U.p)(e.gameStore.options);console.log(t);var n=t.categories.map((function(e){return e.locations})).flat(),c=n[Math.round(Math.random()*n.length-1)],i=Object(a.useState)(Y()([].concat(Object(N.a)(Object(L.a)(null,t.playersCont-t.spyesCount).map((function(){return{id:M()(),value:Object(q.a)("","name",c),type:"location",description:Object(T.a)("Default description",["description","location"],t),isOpened:!1}}))),Object(N.a)(Object(L.a)(null,t.spyesCount).map((function(){return{id:M()(),type:"spy",description:Object(T.a)("Default description",["description","spy"],t),isOpened:!1}})))))),r=Object(O.a)(i,2),s=r[0],j=r[1],d=Object(o.f)(),b=function(e){return Object(V.a)(Object(A.a)(Object(P.a)("id",e)),Object(X.a)("isOpened"))(s)?j((function(){return function(e){return s.filter((function(t){return t.id!==e}))}(e)})):j((function(){return te("isOpened",!s.find((function(t){return t.id===e})).isOpened,e,s)}))};Object(a.useEffect)((function(){s.length||d.push(E.game)}),[s]);var u=Object(a.useCallback)((function(e){return $()("role-managing__card",e?"role-managing__card--opened":"")}),[]);return Object(l.jsx)(l.Fragment,{children:s.map((function(e){return console.log(e),Object(l.jsx)(H.a,{onClick:function(){return t=e.id,void b(t);var t},className:u(e.isOpened),children:e.isOpened?Object(l.jsx)(ee,{title:"location"===e.type?e.value:"\u0412\u044b \u0448\u043f\u0438\u043e\u043d",description:e.description,className:"role-managing__meta"}):"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438, \u0447\u0442\u043e \u0432\u043d\u0443\u0442\u0440\u0438"},e.id)}))})})),ae=n(231),ce=function(e){var t=e.gameStore.options,n=Object(ae.a)({timer:6e4*Object(U.p)(t.timer)}),a=n.countdown,c=n.start,i=n.pause,r=n.isRunning;return Object(l.jsxs)("div",{className:"df fdc",children:[Object(l.jsxs)("span",{className:"game__counter",children:[Math.floor(a%36e5/6e4).toString().padStart(2,"0")," ",":"," ",Math.floor(a%6e4/1e3).toString().padStart(2,"0")]}),Object(l.jsx)("div",{children:r?Object(l.jsx)(f.a,{onClick:i,children:"Pause"}):Object(l.jsx)(f.a,{onClick:c,children:"Start"})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{children:Object(l.jsx)(s.b,{to:E.main,children:"End game"})})})]})},ie=n(232),re=n(233),se=function(){function e(){Object(ie.a)(this,e),this.options={id:1,playersCont:4,spyesCount:1,isTimerNeeded:!0,timer:5,isFirstMemberChoiseNeeded:!1,isRolesNeeded:!1,categories:[],isHelpQuestionsNeeded:!1},Object(U.l)(this)}return Object(re.a)(e,[{key:"setGameOptions",value:function(e){this.options=Object(u.a)(Object(u.a)({},e),{},{description:{location:"\u0412\u044b \u043c\u0438\u0440\u043d\u044b\u0439 \u0436\u0438\u0442\u0435\u043b\u044c. \u0412\u0430\u0448\u0430 \u0446\u0435\u043b\u044c - \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c \u0448\u043f\u0438\u043e\u043d\u0430 \u0438 \u0443\u0431\u0440\u0430\u0442\u044c \u0435\u0433\u043e \u043f\u0443\u0442\u0435\u043c \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f",spy:"\u0412\u044b \u0448\u043f\u0438\u043e\u043d. \u0412\u0430\u0448\u0430 \u0446\u0435\u043b\u044c - \u0443\u0433\u0430\u0434\u0430\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e \u0438\u043b\u0438 \u043d\u0435 \u0434\u0430\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u043c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c, \u0447\u0442\u043e \u0432\u044b \u0435\u0435 \u043d\u0435 \u0437\u043d\u0430\u0435\u0442\u0435"}})}}]),e}(),oe=n(450),je=n(445),le=n(455),de=Object(Q.a)((function(e,t,n,a){return Object(V.a)(Object(B.a)(Object(D.a)(Object(P.a)("id",n),Object(J.a)(e,t))))(a)})),be=function(){var e=Object(a.useState)([{id:M()(),name:""}]),t=Object(O.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({name:""}),r=Object(O.a)(i,2),o=r[0],j=r[1],d=function(e){return function(t){c(de("name",t.target.value,e,n))}},b=function(e){return function(){return c(n.filter((function(t){return t.id!==e})))}},u=function(){var e=Object(I.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F({name:o.name,locations:n});case 3:oe.b.success("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error is",e.t0),oe.b.error("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(m.a,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onFinish:u,children:[Object(l.jsx)(m.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:Object(l.jsx)(je.a,{onChange:function(e){return j({name:e.target.value})}})}),Object(l.jsx)(m.a.Item,{label:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",children:n.map((function(e){var t=e.id,a=e.name;return Object(l.jsxs)(m.a.Item,{children:[Object(l.jsx)(je.a,{onChange:d(t),value:a}),n.length>1&&Object(l.jsx)(f.a,{size:"small",onClick:b(t),children:Object(l.jsx)(le.a,{})})]},t)}))}),Object(l.jsx)(f.a,{type:"text",onClick:function(){return c([].concat(Object(N.a)(n),[{id:M()(),name:""}]))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e"}),Object(l.jsx)(m.a.Item,{children:Object(l.jsx)(f.a,{htmlType:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"})}),Object(l.jsx)(m.a.Item,{children:Object(l.jsx)(f.a,{type:"link",children:Object(l.jsx)(s.b,{to:E.main,children:"\u041d\u0430\u0437\u0430\u0434"})})})]})},ue=n(110),Oe=n(55),he=n(444),me=n(441),pe=n(236),xe=n.n(pe),fe=function(e){var t=e.locations,n=e.name;return Object(l.jsx)("div",{className:"category",children:Object(l.jsx)(he.b,{header:Object(l.jsx)(me.a,{children:n}),children:t.map((function(e){return Object(l.jsx)(he.b.Item,{children:Object(l.jsx)(xe.a,{editable:{onChange:console.log},children:e.name})},e.id)}))})})},ge=(n(432),function(){var e=a.useState([]),t=Object(O.a)(e,2),n=t[0],c=t[1];return a.useEffect(Object(I.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,n=t.categories,c(n);case 5:case"end":return e.stop()}}),e)}))),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"df aic jcsb",children:[Object(l.jsx)(f.a,{type:"link",children:Object(l.jsx)(s.b,{to:E.main,children:Object(l.jsx)(ue.a,{})})}),Object(l.jsx)("h1",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439"})]}),Object(l.jsx)(he.b,{className:"categories__list",children:n.length?n.map((function(e){return Object(l.jsx)(he.b.Item,{children:Object(l.jsx)(fe,Object(u.a)({},e))},e.id)})):Object(l.jsx)(Oe.a,{style:{fontSize:24},spin:!0})})]})}),Ce=new se;var ye=function(){return Object(l.jsx)(s.a,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:E.main,children:Object(l.jsx)(d,{menuItems:[{id:1,name:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430",path:E.newGame},{id:2,name:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430",path:E.rules},{id:3,name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",path:E.addCategory},{id:4,name:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439",path:E.categories}]})}),Object(l.jsx)(o.a,{exact:!0,path:E.newGame,children:Object(l.jsx)(z,{gameStore:Ce})}),Object(l.jsx)(o.a,{exact:!0,path:E.roleManaging,children:Object(l.jsx)(ne,{gameStore:Ce})}),Object(l.jsx)(o.a,{exact:!0,path:E.game,children:Object(l.jsx)(ce,{gameStore:Ce})}),Object(l.jsx)(o.a,{exact:!0,path:E.addCategory,children:Object(l.jsx)(be,{})}),Object(l.jsx)(o.a,{exact:!0,path:E.categories,children:Object(l.jsx)(ge,{})})]})})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,456)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(ye,{})}),document.getElementById("root")),ve()}},[[433,1,2]]]);
//# sourceMappingURL=main.5960fb93.chunk.js.map